<!DOCTYPE html>
<html lang='en'>
<head>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="bootstrap.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <meta charset='UTF-8'>
    <title>Shop</title>
</head>
<body>

<div class="col-sm-4 form-visible" id="clients">
    Add client:
    <label> Name
        <input id="client-name" class="form-control" type="text">
    </label>
    <label> Age
        <input id="client-age" class="form-control" type="number">
    </label>
    <label> Purchase price
        <input id="client-purchase-price" class="form-control" type="number">
    </label>

    <button id="add-client" class="btn btn-primary">Add client</button>
</div>

<div class="col-sm-4" id="products">
    Add product:
    <label> Name
        <input class="form-control" type="text" id="product-name">
    </label>
    <label> Type
        <input class="form-control" type="text" id="product-type">
    </label>
    <label> Price
        <input class="form-control" type="number" id="product-price">
    </label>

    <button id="add-product" class="btn btn-primary">Add product</button>
</div>

<div class="buttons col-sm-2">
    <button id="show-clients" class="btn">Clients</button>
    <button id="show-products" class="btn">Products</button>
    <button id="toggle-form" class="btn">Switch to add client/product</button>
</div>

<div id="display-table" class="col-md-6">

</div>


<script>
    $("button#toggle-form").click(function () {
        $("#clients").toggleClass("form-visible");
        $("#products").toggleClass("form-visible");
    });

    $("#add-client").click(function () {
        var name = $("#client-name").val();
        var age = $("#client-age").val();
        var purchase_price = $("#client-purchase-price").val();
        $.post('client.php', {
            action: 'client',
            name: name,
            age: age,
            purchase_price: purchase_price
        }).then(function (response) {
            alert(response);
        })
    });

    $("#add-product").click(function () {
        var name = $("#product-name").val();
        var type = $("#product-type").val();
        var price = $("#product-price").val();
        $.post('product.php', {
            action: 'product',
            name: name,
            type: type,
            price: price
        }).then(function (response) {
            alert(response);
        })
    });

    $("#show-clients").click(function () {
        $.get('client.php', {action: 'clients'}).then(function (response) {
            var clients = JSON.parse(response).clients;

            $("#display-table")
                .empty()
                .append($('<table>')
                    .attr('id', 'clients-table')
                    .addClass('table')
                    .addClass('table-hover')
                    .append($('<tbody>').append(($('<tr>')
                                .append($('<td>').text('ID'))
                                .append($('<td>').text('Name'))
                                .append($('<td>').text('Age'))
                                .append($('<td>').text('Purchase price'))
                        ))
                    )
                );

            for (var index in clients) {
                $("#clients-table").append(
                    $('<tr>')
                        .append($('<td>').text(clients[index].id))
                        .append($('<td>').text(clients[index].name))
                        .append($('<td>').text(clients[index].age))
                        .append($('<td>').text(clients[index].purchase_price))
                );
            }
            console.log(response);
        });
    });

    $("#show-products").click(function () {
        $.get('product.php', {action: 'products'}).then(function (response) {
            var products = JSON.parse(response).products;


            $("#display-table")
                .empty()
                .append($('<table>')
                    .attr('id', 'products-table')
                    .addClass('table')
                    .addClass('table-hover')
                    .append($('<tbody>').append(($('<tr>')
                                .append($('<td>').text('ID'))
                                .append($('<td>').text('Name'))
                                .append($('<td>').text('Type'))
                                .append($('<td>').text('Price'))
                        ))
                    )
                );

            for (var index in products) {
                $('#products-table').append(
                    $('<tr>')
                        .append($('<td>').text(products[index].id))
                        .append($('<td>').text(products[index].name))
                        .append($('<td>').text(products[index].type))
                        .append($('<td>').text(products[index].price))
                );
            }
            console.log(response);
        });
    });


</script>
</body>
</html>